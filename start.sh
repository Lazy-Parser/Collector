#!/bin/bash

set -e # –µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ ‚Äî —Å–∫—Ä–∏–ø—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è

echo "üöÄ –ó–∞–ø—É—Å–∫ Collector..."

echo "üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker..."
if ! docker info > /dev/null 2>&1; then
  echo "‚ùå Docker –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ –≤—Ä—É—á–Ω—É—é."
  exit 1
fi

echo "üê≥ –ó–∞–ø—É—Å–∫ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
docker-compose up -d  # –∏–ª–∏ docker run ... (–µ—Å–ª–∏ –±–µ–∑ compose)

echo "üü¢ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã"

echo "üß† –ó–∞–ø—É—Å–∫ Go-—Å–µ—Ä–≤–µ—Ä–∞..."
go run main.go
